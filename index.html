<html>
<head>
    <title>sample</title>
    <link rel="stylesheet" type="text/css" href="http://fonts.googleapis.com/css?family=Quicksand" />
    <link rel="stylesheet" type="text/css" href="css/pretty-table.css" />
    <link rel="stylesheet" type="text/css" href="css/bootstrap.css" />

    <!-- lib -->
    <script type="text/javascript" src="libs/jquery-1.11.1.min.js" ></script>
    <script type="text/javascript" src="libs/underscore-min.js" ></script>
    <script type="text/javascript" src="libs/backbone-min.js" ></script>

    <!-- src dev
    <script type="text/javascript" src="/pretty-json-debug.js" ></script>
    -->
    <!-- src build -->
    <!-- script type="text/javascript" src="build/pretty-json-min.js" ></script -->

    <script type="text/javascript" src="src/util.js" ></script>
    <script type="text/javascript" src="src/cell.js" ></script>
    <script type="text/javascript" src="src/row.js" ></script>
    <script type="text/javascript" src="src/header.js" ></script>
    <script type="text/javascript" src="src/table.js" ></script>
    <script type="text/javascript" src="src/comparer.js" ></script>
    <script type="text/javascript" src="src/tpl.js" ></script>
    

    <!-- just css for this page example -->
    <style type="text/css">
        textarea{
            width: 100%;
            padding:4px 7px;
            border:1px solid #ccc;
            border-radius:4px;
            background:#fff;
            color:#333;
            margin-bottom:7px;
        }
    </style>
</head>

<body>
<script>
    $(document).ready(function() {

        var el = {
            btnAction: $('#action'),
            btnClear: $('#clear'),
            input1: $('#input1'),
            input2: $('#input2'),
            result: $('#result')
        };

        var demo1 = {
            headers:["ApplicationName", "ApplicationVersion"],
            models:[
                {
                    "ApplicationName": "ppA Name",
                    "ApplicationVersion": "4"
                },
                {
                    "ApplicationName": "App Name",
                    "ApplicationVersion": "5"
                }
            ]
        };

        var demo2 = {
            headers:["ApplicationName", "ApplicationVersion"],
            models:[
                {
                    "ApplicationName": "App Name",
                    "ApplicationVersion": "5"
                },
                {
                    "ApplicationName": "ppA Name",
                    "ApplicationVersion": "5"
                }
            ]
        };

        el.input1.val(JSON.stringify(demo1,null,4));
        el.input2.val(JSON.stringify(demo2,null,4));

        el.btnAction.on('click', function(){
            var json1 = el.input1.val();
            var json2 = el.input2.val();

            var data1;
            var data2;
            try{ 
                data1 = JSON.parse(json1);
                data2 = JSON.parse(json2);
            } catch(e) {
                alert('not valid JSON');
                return;
            }
            
            var table1 = new PrettyTable.view.Table({
                headers: data1.headers,
             	models: data1.models
            });

            var table2 = new PrettyTable.view.Table({
                headers: data2.headers,
                models: data2.models
            });

            var comparer = new PrettyTable.view.Comparer({
                el:el.result,
                table1: table1,
                table2: table2,
                keys: ["ApplicationName", "ApplicationVersion"]
            });
        });

        el.btnClear.on('click', function(){
            el.input.val('');
            el.result.html('');
        });
    });
</script>
<div class="container">

    <br>

    <div class="row">
        <div class="col text-center">
            <h1>Demo</h1>
        </div>
    </div>

    <br>

    <div class="row">
        <div class="col">
            <textarea id="input1" rows="12"></textarea>
        </div>
        <div class="col">
            <textarea id="input2" rows="12"></textarea>
        </div>
    </div>

    <div class="row">
        <div class="col">
            <button id="action">go</button>
            <button id="clear">clear</button>
        </div>
    </div>

    <br>

    <div class="row">
        <div class="col">
            <span id="result"></span>
        </div>
    </div>

</div>
</body>
</html>
